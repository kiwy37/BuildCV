<!-- Header removed per request. Zoom and download moved above the CV preview. -->

<div class="preview-container">
  <!-- Left: customization panel -->
  <div class="customization-sidebar" [class.open]="showCustomizationPanel">
    <div class="sidebar-header">
      <h3>
        <i class="icon-sliders"></i>
        Customize CV
      </h3>
      <button class="btn-close" (click)="toggleCustomizationPanel()">‚Äπ</button>
    </div>

    <div class="sidebar-content">
      <!-- Font Family Selection -->
      <details class="setting-group" open>
        <summary>
          <h4>üî§ Font Family</h4>
        </summary>
        <div class="font-selection">
          <button 
            *ngFor="let font of ['Roboto', 'Lato', 'Montserrat', 'Open Sans', 'Raleway', 'Caladea', 'Lora', 'Roboto Slab', 'Playfair Display', 'Merriweather']"
            class="font-btn"
            [ngClass]="{'active': customization.fontFamily === font}"
            (click)="customization.fontFamily = font; onCustomizationChange()"
            [style.fontFamily]="font">
            {{ font }}
          </button>
        </div>
      </details>

      <!-- Typography Settings -->
      <details class="setting-group">
        <summary>
          <h4>üìù Typography</h4>
        </summary>
        <div class="setting-item">
          <label>Body Font Size: {{customization.fontSize}}px</label>
          <input 
            type="range" 
            [(ngModel)]="customization.fontSize" 
            (input)="onCustomizationChange()"
            min="10" 
            max="18" 
            step="1"
            class="slider">
        </div>

        <div class="setting-item">
          <label>Heading Font Size: {{customization.headingFontSize}}px</label>
          <input 
            type="range" 
            [(ngModel)]="customization.headingFontSize" 
            (input)="onCustomizationChange()"
            min="18" 
            max="32" 
            step="1"
            class="slider">
        </div>

        <div class="setting-item">
          <label>Line Height: {{customization.lineHeight}}</label>
          <input 
            type="range" 
            [(ngModel)]="customization.lineHeight" 
            (input)="onCustomizationChange()"
            min="1.2" 
            max="2.0" 
            step="0.1"
            class="slider">
        </div>

        <div class="setting-item">
          <label>Section Spacing: {{customization.sectionSpacing}}px</label>
          <input 
            type="range" 
            [(ngModel)]="customization.sectionSpacing" 
            (input)="onCustomizationChange()"
            min="10" 
            max="40" 
            step="2"
            class="slider">
        </div>
      </details>

      <!-- Margins -->
      <details class="setting-group">
        <summary>
          <h4>üìè Page Margins</h4>
        </summary>
        <div class="spacing-grid">
          <div class="setting-item">
            <label>Top: {{customization.marginTop}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginTop" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Bottom: {{customization.marginBottom}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginBottom" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Left: {{customization.marginLeft}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginLeft" 
              (input)="onCustomizationChange()"
              min="0" 
              max="100" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Right: {{customization.marginRight}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginRight" 
              (input)="onCustomizationChange()"
              min="0" 
              max="100" 
              step="5"
              class="slider">
          </div>
        </div>
      </details>

      <!-- Padding -->
      <details class="setting-group">
        <summary>
          <h4>üì¶ Content Padding</h4>
        </summary>
        <div class="spacing-grid">
          <div class="setting-item">
            <label>Top: {{customization.paddingTop}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingTop" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Bottom: {{customization.paddingBottom}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingBottom" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Left: {{customization.paddingLeft}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingLeft" 
              (input)="onCustomizationChange()"
              min="0" 
              max="100" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Right: {{customization.paddingRight}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingRight" 
              (input)="onCustomizationChange()"
              min="0" 
              max="100" 
              step="5"
              class="slider">
          </div>
        </div>
      </details>

      <!-- Colors -->
      <details class="setting-group">
        <summary>
          <h4>üé® Colors</h4>
        </summary>
        <div class="setting-item">
          <label>Primary Color (Headings)</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.primaryColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.primaryColor}}</span>
          </div>
        </div>

        <div class="setting-item">
          <label>Secondary Color (Accents)</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.secondaryColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.secondaryColor}}</span>
          </div>
        </div>

        <div class="setting-item">
          <label>Text Color</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.textColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.textColor}}</span>
          </div>
        </div>

        <div class="setting-item">
          <label>Background Color</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.backgroundColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.backgroundColor}}</span>
          </div>
        </div>
      </details>

      <!-- Reset Button -->
      <button class="btn-reset" (click)="resetCustomization()">
        <i class="icon-refresh"></i> Reset to Default
      </button>
    </div>
  </div>

  <!-- Sidebar toggle (visible even when sidebar is closed) -->
  <button class="sidebar-toggle" (click)="toggleCustomizationPanel()" [attr.aria-expanded]="showCustomizationPanel">
    {{ showCustomizationPanel ? '‚Äπ' : '‚Ä∫' }}
  </button>

  <div class="preview-main" [class.shifted]="showCustomizationPanel">
    <div class="preview-top-actions">
      <div class="page-size-select">
        <label style="font-size:0.9rem;color:var(--text-secondary);margin-right:0.5rem;">Size:</label>
        <select [(ngModel)]="pageSize" (change)="onPageSizeChange()" class="font-select">
          <option value="A4">A4</option>
          <option value="Letter">Letter</option>
        </select>
      </div>

      <div class="actions-right">
        <div class="zoom-controls">
          <label style="font-size:0.95rem;color:var(--text-secondary);">Zoom: {{ (zoom * 100) | number:'1.0-0' }}%</label>
          <input type="range" min="50" max="150" [value]="zoom * 100" (input)="setZoom($any($event.target).value)" class="slider-zoom">
        </div>

        <button class="btn-primary btn-download-small" (click)="downloadPDF()">
          <i class="icon-download"></i>
        </button>
      </div>
    </div>
    <!-- CV Preview -->
    <div class="cv-preview-wrapper" #cvWrapper *ngIf="!isLoading">
      <div class="cv-preview" #cvPreview [innerHTML]="previewHtml" [style.transform]="'scale(' + effectiveScale + ')'">
      </div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>Generating preview...</p>
    </div>

    <!-- Quick Edit Shortcuts removed as requested -->
  </div>
</div>