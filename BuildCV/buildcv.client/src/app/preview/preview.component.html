<div class="preview-container" [class.sidebar-collapsed]="!showCustomizationPanel">
  <!-- Sidebar (left) -->
  <div class="sidebar">
    <app-customize-menu
      [customization]="customization"
      [show]="showCustomizationPanel"
      [zoomPercent]="zoom * 100"
      (customizationChange)="onCustomizationChange()"
      (zoomChange)="setZoom($event)"
      (reset)="resetCustomization()"
      (exportPdf)="downloadPDF()"
      (back)="backToThemeSelection()"
    ></app-customize-menu>
  </div>

  <!-- Sidebar toggle (positioned between sidebar and content) -->
  <button
    class="sidebar-toggle"
    (click)="toggleCustomizationPanel()"
    [attr.aria-expanded]="showCustomizationPanel"
  >
    {{ showCustomizationPanel ? "‹" : "›" }}
  </button>

  <!-- Main content: CV Preview centered in remaining space -->
  <div class="main-content">
    <div class="cv-preview-wrapper" #cvWrapper *ngIf="!isLoading">
      <div
        class="cv-preview"
        #cvPreview
        [innerHTML]="previewHtml"
        [style.transform]="'scale(' + effectiveScale + ')'"
        [ngClass]="{ a4: pageSize === 'A4', letter: pageSize === 'Letter' }"
      ></div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>Generating preview...</p>
    </div>
  </div>
</div>
