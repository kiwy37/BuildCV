<div class="section-container">
  <div class="section-header">
    <h2>
      <i class="icon-trophy"></i>
      Additional Information
    </h2>
  </div>

  <!-- Certifications Section -->
  <div class="education-card">
    <form [formGroup]="certificationsForm" *ngIf="certifications.length > 0">
      <div formArrayName="certifications">
        <div *ngFor="let cert of certifications.controls; let i = index" class="cert-item">
          <!-- Cert Header -->
          <div class="cert-item-header">
            <div class="card-title">
              <h3>Certification {{ i + 1 }}</h3>
            </div>
            <div class="cert-actions">
              <button type="button"
                      class="btn-icon move-btn btn-sm"
                      (click)="moveCertificationUp(i)"
                      [disabled]="i === 0"
                      title="Move up">
                <i class="icon-arrow-up"></i>
              </button>
              <button type="button"
                      class="btn-icon move-btn btn-sm"
                      (click)="moveCertificationDown(i)"
                      [disabled]="i === certifications.length - 1"
                      title="Move down">
                <i class="icon-arrow-down"></i>
              </button>
              <button type="button" class="btn-icon btn-danger btn-sm" (click)="removeCertification(i)" title="Remove">
                <i class="icon-trash"></i>
              </button>
            </div>
          </div>

          <div [formGroupName]="i" class="form-grid">
            <div class="input-group">
              <label [for]="'certName' + i">Certification Name</label>
              <input 
                type="text" 
                [id]="'certName' + i" 
                formControlName="name"
                placeholder="Ex: AWS Certified Solutions Architect"
                class="form-input"
                [class.error-border]="cert.get('name')?.invalid && cert.get('name')?.touched">
            </div>

            <div class="input-group">
              <label [for]="'issuer' + i">Issuing Organization</label>
              <input 
                type="text" 
                [id]="'issuer' + i" 
                formControlName="issuer"
                placeholder="Ex: Amazon"
                class="form-input"
                [class.error-border]="cert.get('issuer')?.invalid && cert.get('issuer')?.touched">
            </div>

            <div class="input-group">
              <label [for]="'date' + i">Date Obtained</label>
              <input 
                type="month" 
                [id]="'date' + i" 
                formControlName="date"
                class="form-input">
            </div>

            <div class="input-group">
              <label [for]="'credentialId' + i">Credential ID</label>
              <input 
                type="text" 
                [id]="'credentialId' + i" 
                formControlName="credentialId"
                placeholder="ABC-123-XYZ"
                class="form-input">
            </div>
          </div>
          <div class="divider" *ngIf="i < certifications.length - 1"></div>
        </div>
      </div>
    </form>

    <!-- Enhanced Empty State -->
    <div class="empty-state" *ngIf="certifications.length === 0">
      <div class="empty-icon-wrapper">
        <i class="icon-id-card"></i>
      </div>
      <p class="empty-title">No professional certifications</p>
      <p class="empty-state-subtitle">Showcase your achievements to stand out.</p>
      <button type="button" class="btn-primary" (click)="addCertification()">
        <i class="icon-plus"></i> Add First Certification
      </button>
    </div>

    <!-- Regular Add Button (only visible when list is NOT empty) -->
    <div style="margin-top: 1.5rem;" *ngIf="certifications.length > 0">
      <button type="button" class="btn-primary" (click)="addCertification()">
        <i class="icon-plus"></i> Add Certification
      </button>
    </div>
  </div>

  <!-- Languages Section -->
  <div class="education-card">
    <div class="subtitle">
      <i class="icon-globe"></i> Languages
    </div>

    <!-- Compact Add Bar (Matches Skills) -->
    <div class="compact-add-bar">
      <div class="input-wrapper">
        <input
          type="text"
          [(ngModel)]="currentLanguage"
          (keypress)="onLanguageKeyPress($event)"
          placeholder="Type a language (e.g. English)..."
          class="form-input">
        <button class="btn-primary" (click)="addLanguage()" [disabled]="!currentLanguage.trim()">
          Add
        </button>
      </div>
    </div>

    <div class="divider" *ngIf="languages.length > 0"></div>

    <!-- Compact List (Matches Skills) -->
    <div class="compact-list" *ngIf="languages.length > 0">
      <div *ngFor="let language of languages; let i = index" class="skill-row">
        <div class="move-actions">
          <button type="button"
                  class="move-btn btn-icon move-up"
                  (click)="moveLanguageUp(i)"
                  [disabled]="i === 0"
                  aria-label="Move language up"
                  title="Move up">
            <i class="icon-arrow-up large-icon"></i>
          </button>
          <button type="button"
                  class="move-btn btn-icon move-down"
                  (click)="moveLanguageDown(i)"
                  [disabled]="i === languages.length - 1"
                  aria-label="Move language down"
                  title="Move down">
            <i class="icon-arrow-down large-icon"></i>
          </button>
        </div>
        <!-- Language Name Input -->
        <div class="skill-name-col">
          <input
            type="text"
            [(ngModel)]="language.name"
            class="row-input">
        </div>

        <!-- Dot Level Selector -->
        <div class="skill-level-col">
          <div class="level-dots">
            <div 
              *ngFor="let level of [1,2,3,4,5]" 
              class="dot" 
              [class.filled]="(language.level || 0) >= level"
              (click)="updateLanguageLevel(i, level)"
              title="Level {{level}}/5">
            </div>
          </div>
        </div>

        <!-- Remove -->
        <button type="button" class="btn-icon btn-danger btn-sm" (click)="removeLanguage(i)">
          <i class="icon-trash"></i>
        </button>
      </div>
    </div>
    
    <div class="empty-state" *ngIf="languages.length === 0">
      <p class="empty-state-subtitle">No languages added yet.</p>
    </div>
  </div>
</div>