<!-- preview.component.html -->
<div class="preview-container" [class.sidebar-collapsed]="!showCustomizationPanel">
  <!-- Sidebar -->
  <div class="sidebar">
    <app-customize-menu
      [customization]="customization"
      [show]="showCustomizationPanel"
      [zoomPercent]="zoom * 100"
      (customizationChange)="onCustomizationChange()"
      (zoomChange)="setZoom($event)"
      (reset)="resetCustomization()"
      (exportPdf)="downloadPDF()"
      (back)="backToThemeSelection()"
    ></app-customize-menu>
  </div>

  <!-- Toggle Button -->
  <button
    class="sidebar-toggle"
    (click)="toggleCustomizationPanel()"
    [attr.aria-expanded]="showCustomizationPanel"
  >
    {{ showCustomizationPanel ? "‹" : "›" }}
  </button>

  <!-- CV Preview Area -->
  <div class="cv-preview-area">
    <div class="cv-preview-wrapper" [ngStyle]="getPreviewStyles()">

      <!-- Offscreen source (Angular renders here; Paged.js paginates it) -->
      <div #pagedSource class="paged-source" aria-hidden="true">
        <app-lima-template
          *ngIf="selectedTheme === 'lima'"
          [cvData]="cvData"
          [customization]="customization"
        ></app-lima-template>

        <app-riga-template
          *ngIf="selectedTheme === 'riga'"
          [cvData]="cvData"
          [customization]="customization"
        ></app-riga-template>

        <app-rotterdam-template
          *ngIf="selectedTheme === 'rotterdam'"
          [cvData]="cvData"
          [customization]="customization"
        ></app-rotterdam-template>

        <app-ats-template
          *ngIf="selectedTheme === 'ats'"
          [cvData]="cvData"
          [customization]="customization"
        ></app-ats-template>
      </div>
    </div>
  </div>
</div>