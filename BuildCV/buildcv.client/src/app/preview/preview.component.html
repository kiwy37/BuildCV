<div class="preview-container">
  <!-- Customization Panel -->
  <div class="customization-sidebar" [class.open]="showCustomizationPanel">
    <div class="sidebar-header">
      <h3>
        <i class="icon-settings"></i>
        Customize CV
      </h3>
      <button class="btn-close" (click)="toggleCustomizationPanel()">Ã—</button>
    </div>

    <div class="sidebar-content">
      <!-- Font Settings -->
      <div class="setting-group">
        <h4>Typography</h4>
        
        <div class="setting-item">
          <label>Font Size: {{customization.fontSize}}px</label>
          <input 
            type="range" 
            [(ngModel)]="customization.fontSize" 
            (input)="onCustomizationChange()"
            min="10" 
            max="20" 
            step="1"
            class="slider">
        </div>

        <div class="setting-item">
          <label>Line Height: {{customization.lineHeight}}</label>
          <input 
            type="range" 
            [(ngModel)]="customization.lineHeight" 
            (input)="onCustomizationChange()"
            min="1.2" 
            max="2.0" 
            step="0.1"
            class="slider">
        </div>
      </div>

      <!-- Spacing Settings -->
      <div class="setting-group">
        <h4>Margins</h4>
        
        <div class="spacing-grid">
          <div class="setting-item">
            <label>Top: {{customization.marginTop}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginTop" 
              (input)="onCustomizationChange()"
              min="0" 
              max="60" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Bottom: {{customization.marginBottom}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginBottom" 
              (input)="onCustomizationChange()"
              min="0" 
              max="60" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Left: {{customization.marginLeft}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginLeft" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Right: {{customization.marginRight}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.marginRight" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>
        </div>
      </div>

      <div class="setting-group">
        <h4>Padding</h4>
        
        <div class="spacing-grid">
          <div class="setting-item">
            <label>Top: {{customization.paddingTop}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingTop" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Bottom: {{customization.paddingBottom}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingBottom" 
              (input)="onCustomizationChange()"
              min="0" 
              max="80" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Left: {{customization.paddingLeft}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingLeft" 
              (input)="onCustomizationChange()"
              min="0" 
              max="100" 
              step="5"
              class="slider">
          </div>

          <div class="setting-item">
            <label>Right: {{customization.paddingRight}}px</label>
            <input 
              type="range" 
              [(ngModel)]="customization.paddingRight" 
              (input)="onCustomizationChange()"
              min="0" 
              max="100" 
              step="5"
              class="slider">
          </div>
        </div>
      </div>

      <!-- Color Settings -->
      <div class="setting-group">
        <h4>Colors</h4>
        
        <div class="setting-item">
          <label>Primary Color</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.primaryColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.primaryColor}}</span>
          </div>
        </div>

        <div class="setting-item">
          <label>Secondary Color</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.secondaryColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.secondaryColor}}</span>
          </div>
        </div>

        <div class="setting-item">
          <label>Text Color</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.textColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.textColor}}</span>
          </div>
        </div>

        <div class="setting-item">
          <label>Background Color</label>
          <div class="color-picker-wrapper">
            <input 
              type="color" 
              [(ngModel)]="customization.backgroundColor" 
              (input)="onCustomizationChange()"
              class="color-picker">
            <span class="color-value">{{customization.backgroundColor}}</span>
          </div>
        </div>
      </div>

      <!-- Reset Button -->
      <button class="btn-reset" (click)="resetCustomization()">
        <i class="icon-refresh"></i> Reset to Default
      </button>
    </div>
  </div>

  <!-- Main Preview Area -->
  <div class="preview-main" [class.shifted]="showCustomizationPanel">
    <div class="preview-header">
      <div class="preview-title">
        <h2>
          <i class="icon-eye"></i>
          CV Preview
        </h2>
        <p>Review and customize your CV</p>
      </div>

      <div class="preview-actions">
        <button class="btn-secondary btn-customize" (click)="toggleCustomizationPanel()">
          <i class="icon-sliders"></i>
          {{ showCustomizationPanel ? 'Hide' : 'Show' }} Customization
        </button>
        <button class="btn-primary" (click)="downloadPDF()">
          <i class="icon-download"></i>
          Download PDF
        </button>
      </div>
    </div>

    <!-- CV Preview -->
    <div class="cv-preview-wrapper" *ngIf="!isLoading">
      <div class="cv-preview" [innerHTML]="previewHtml"></div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>Generating preview...</p>
    </div>

    <!-- Quick Edit Shortcuts -->
    <div class="quick-edit-shortcuts">
      <h4>Need to make changes?</h4>
      <div class="shortcuts-grid">
        <button class="shortcut-btn" (click)="goToStep(1)">
          <i class="icon-user"></i>
          <span>Personal Info</span>
        </button>
        <button class="shortcut-btn" (click)="goToStep(2)">
          <i class="icon-briefcase"></i>
          <span>Experience</span>
        </button>
        <button class="shortcut-btn" (click)="goToStep(3)">
          <i class="icon-graduation-cap"></i>
          <span>Education</span>
        </button>
        <button class="shortcut-btn" (click)="goToStep(4)">
          <i class="icon-code"></i>
          <span>Skills</span>
        </button>
      </div>
    </div>
  </div>
</div>